@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;
@use '../abstracts/functions' as *;
@use '../components/button';

.site-header {
  background-color: $color-dark;
  color: $color-text-light;
}

.header-inner {
  @include container;
  @include flex-center(rem(16), space-between);
  padding-block: rem(10);
}

.logo {
  font-family: $font-heading;
  letter-spacing: 0.08em;
  font-size: rem(18);
}

.main-nav ul {
  @include flex-center(rem(20), center, center);
}

.main-nav a {
  font-size: rem(14);
  @include transition(color 0.2s);

  &:hover,
  &:focus-visible {
    color: $color-secondary;
  }
}

.auth-controls {
  @include flex-center(rem(8));
  font-size: rem(14);
  position: relative;
}

/* --- анонімний стан --- */

.auth-controls__anonymous {
  @include flex-center(rem(8));
}

.auth-controls a {
  padding: rem(6) rem(12);
  border-radius: rem(999);
  border: 1px solid transparent;
  @include transition(background-color 0.2s, color 0.2s, transform 0.1s, box-shadow 0.1s);
}

.auth-controls a:first-of-type {
  @extend .btn--outline;
}

.auth-controls a:last-of-type {
  @extend .btn--primary;
}

.auth-controls > button {
  display: none;
}

/* --- User menu (залогінений стан) --- */

.user-menu {
  position: relative;
  display: inline-flex;
}

.user-menu__trigger {
  display: inline-flex;
  align-items: center;
  gap: rem(10);
  padding: rem(6) rem(14);
  border-radius: rem(999);
  border: 1px solid rgba(255, 255, 255, 0.7);
  background-color: transparent;
  color: $color-text-light;
  cursor: pointer;
  @include transition(background-color 0.2s, transform 0.1s, box-shadow 0.1s, border-color 0.2s);

  &:hover,
  &:focus-visible {
    background-color: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.9);
  }
}

.user-avatar {
  width: rem(32);
  height: rem(32);
  border-radius: 50%;
  background-color: $color-accent;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: rem(16);
  color: $color-text-light;
}

.user-menu__text {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  line-height: 1.1;
}

.user-menu__hello {
  font-size: rem(12);
  opacity: 0.8;
}

.user-menu__name {
  font-size: rem(14);
  font-weight: 700;
}

/* дропдаун */

.user-menu__dropdown {
  position: absolute;
  right: 0;
  top: calc(100% + #{rem(8)});
  padding: rem(12) rem(16);
  background-color: $color-bg;
  color: $color-text-main;
  border-radius: rem(16);
  min-width: rem(220);
  box-shadow: 0 rem(10) rem(25) rgba(0, 0, 0, 0.35);
  border: 1px solid rgba(0, 0, 0, 0.2);
  opacity: 0;
  visibility: hidden;
  transform: translateY(rem(4));
  @include transition(opacity 0.15s, transform 0.15s, visibility 0.15s);
  z-index: 20;
}

.user-menu__dropdown--open {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.user-menu__signed-as {
  font-size: rem(14);
  margin-bottom: rem(10);

  strong {
    font-weight: 700;
  }
}

/* ТУТ головна зміна: primary-кнопка, тобто помаранчева */
.user-menu__logout {
  @extend .btn--primary;
  width: 100%;
}

/* favorites прихований, коли додаємо клас visually-hidden */
.js-nav-favorites.visually-hidden {
  display: none;
}

@media (min-width: $bp-lg) {
  .header-inner {
    height: 80px;
    padding-block: 0;
  }

  .logo {
    font-size: rem(26);
  }

  .main-nav a {
    font-size: rem(20);
  }

  .auth-controls {
    font-size: rem(18);
    gap: rem(16);
  }

  .auth-controls a {
    padding: rem(10) rem(24);
  }
}
